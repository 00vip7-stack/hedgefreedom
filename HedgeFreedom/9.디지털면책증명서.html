import React from 'react';
import jsPDF from 'jspdf';
import html2canvas from 'html2canvas';

const ProofOfStrategy = ({ data }) => {
  const downloadPDF = () => {
    const input = document.getElementById('report-area');
    html2canvas(input).then((canvas) => {
      const imgData = canvas.toDataURL('image/png');
      const pdf = new jsPDF('p', 'mm', 'a4');
      pdf.addImage(imgData, 'PNG', 0, 0, 210, 297);
      pdf.save(`POS_${new Date().toISOString().slice(0,10)}.pdf`);
    });
  };

  return (
    <div style={{ padding: '20px' }}>
      <div class="header">
        <div class="logo">HEDGEFREEDOM</div>
        <div id="fx-rate-header" style={{fontSize:'13px', color:'#1976d2', marginLeft:'auto', display:'flex', gap:'18px', alignItems:'center'}}>
          <span><b>USD/KRW</b> 1,325.50 <span style={{color:'#d32f2f'}}>+2.10</span> <span style={{fontSize:'11px', color:'#888'}}>(+0.16%)</span></span>
          <span><b>EUR/KRW</b> 1,420.80 <span style={{color:'#1976d2'}}>-1.50</span> <span style={{fontSize:'11px', color:'#888'}}>(-0.11%)</span></span>
          <span><b>JPY/KRW</b> 9.85 <span style={{color:'#d32f2f'}}>+0.02</span> <span style={{fontSize:'11px', color:'#888'}}>(+0.20%)</span></span>
          <span style={{borderLeft:'1px solid #e0e0e0', paddingLeft:'14px', color:'#333'}}>
              <b>달러인덱스(DXY)</b> 104.25 <span style={{color:'#1976d2'}}>+0.12</span> <span style={{fontSize:'11px', color:'#888'}}>(+0.11%)</span>
          </span>
        </div>
      </div>
      <div style={{marginBottom:'12px'}}>
        <span
          style={{fontWeight:'bold',fontSize:'22px',color:'#1976d2',textDecoration:'none',letterSpacing:'1px',cursor:'pointer'}}
          onClick={() => window.location.href = '1.dashboard.html'}
        >
          헤지프리덤
        </span>
      </div>
      <div class="menu-bar" style="margin-bottom:18px;">
        <a href="1.dashboard.html" class="menu-item">대시보드</a>
        <a href="2.trade-input.html" class="menu-item">거래관리</a>
        <a href="3.internal-hedge.html" class="menu-item">내부헤지</a>
        <a href="4.hedge-strategy.html" class="menu-item">외부헤지</a>
        <a href="5.profit-analysis.html" class="menu-item">손익분석</a>
        <a href="6.report.html" class="menu-item">리포트</a>
        <a href="7.excel-upload.html" class="menu-item">엑셀업로드</a>
        <a href="9.디지털면책증명서.html" class="menu-item active">디지털면책증명서</a>
        <a href="index.html" class="menu-item">모듈홈</a>
      </div>
      <div id="report-area" style={{ width: '210mm', minHeight: '297mm', padding: '20px', border: '1px solid #ddd', backgroundColor: '#fff' }}>
        <h1 style={{ textAlign: 'center', color: '#1a3a5f' }}>디지털 면책 증명서 (Proof of Strategy)</h1>
        <p style={{ textAlign: 'right' }}>문서번호: POS-20260128-0001</p>
        <hr />
        
        <h3>1. 실행 개요</h3>
        <ul>
          <li><strong>실행 일시:</strong> 2026년 1월 28일 00:10 (KST)</li>
          <li><strong>분석 로직:</strong> FX-Guardian 자동 내부 매칭 알고리즘 v2.0</li>
          <li><strong>연동 데이터:</strong> 더존/이카운트 ERP 동기화 완료</li>
        </ul>

        <h3>2. 시스템 판단 근거</h3>
        <div style={{ backgroundColor: '#f9f9f9', padding: '15px', borderLeft: '5px solid #1a3a5f' }}>
          <p>"사내 외환관리 규정 제5조에 의거하여, 외부 파생상품 거래 전 가용 외화 자산을 우선적으로 상계 처리함. 대상 거래처의 과거 입금 지연 평균(0.8일)이 안전 임계치(3일) 내에 있으므로 매칭 승인됨."</p>
        </div>

        <h3>3. 상세 매칭 내역</h3>
        <table style={{ width: '100%', borderCollapse: 'collapse', marginTop: '10px' }}>
          <thead>
            <tr style={{ backgroundColor: '#eee' }}>
              <th style={{ border: '1px solid #ddd', padding: '8px' }}>구분</th>
              <th style={{ border: '1px solid #ddd', padding: '8px' }}>통화</th>
              <th style={{ border: '1px solid #ddd', padding: '8px' }}>금액</th>
              <th style={{ border: '1px solid #ddd', padding: '8px' }}>매칭 결과</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style={{ border: '1px solid #ddd', padding: '8px' }}>입금 예정(2/10)</td>
              <td style={{ border: '1px solid #ddd', padding: '8px' }}>USD</td>
              <td style={{ border: '1px solid #ddd', padding: '8px' }}>100,000</td>
              <td style={{ border: '1px solid #ddd', padding: '8px', color: 'blue' }}>80,000 상계 완료</td>
            </tr>
            <tr>
              <td style={{ border: '1px solid #ddd', padding: '8px' }}>출금 예정(2/12)</td>
              <td style={{ border: '1px solid #ddd', padding: '8px' }}>USD</td>
              <td style={{ border: '1px solid #ddd', padding: '8px' }}>80,000</td>
              <td style={{ border: '1px solid #ddd', padding: '8px', fontWeight: 'bold' }}>수수료 절감액: 96만원</td>
            </tr>
          </tbody>
        </table>

        <div style={{ marginTop: '50px', textAlign: 'center' }}>
          <p style={{ fontSize: '14px', color: '#666' }}>본 리포트는 시스템에 의해 자동 생성되었으며, 실무자의 주관적 판단이 배제되었음을 증명합니다.</p>
          <div style={{ marginTop: '20px', fontWeight: 'bold', fontSize: '18px' }}>FX-Guardian 자동화 시스템 인증 (인)</div>
        </div>
      </div>
      <button onClick={downloadPDF} style={{ marginTop: '20px', padding: '10px 20px', backgroundColor: '#1a3a5f', color: '#fff', cursor: 'pointer' }}>
        PDF 리포트 다운로드
      </button>
      <div style={{ marginTop: '32px', textAlign: 'right' }}>
        <button onClick={() => window.location.href='dashboard.html'} style={{ background:'#1976d2', color:'#fff', border:'none', borderRadius:'4px', padding:'10px 22px', fontSize:'14px', cursor:'pointer' }}>다음: 대시보드 모듈 →</button>
      </div>
    </div>
  );
};

export default ProofOfStrategy;
.menu-bar { background: #fff; border-bottom: 1px solid #ddd; height: 35px; display: flex; align-items: center; padding: 0 10px; }
        .menu-item { padding: 8px 15px; min-width: 90px; text-align: center; color: #555; cursor: pointer; font-size: 12px; border-right: 1px solid #e5e5e5; background: #fafafa; text-decoration: none; display: inline-block; box-sizing: border-box; }
        .menu-item.active { background: #4a90e2; color: #fff; font-weight: bold; }
